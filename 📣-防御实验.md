---
title: ğŸ“£-é˜²å¾¡å®éªŒ
date: 2023-09-15 09:22:40
tags: ['é˜²å¾¡å®éªŒ', 'æŒç»­æ›´æ–°ä¸­']
categories: è®ºæ–‡å®éªŒ
---

{% raw %}

ç»™å…¨å±€æ¨¡å‹å‚æ•°åŠ é«˜æ–¯å™ªå£°ï¼š$w{{_{G}^{r}}^{\prime }}=w_{G}^{r}+N(0,{{\sigma }^{2}})$ï¼Œå…¶ä¸­$\sigma =\sqrt{2\operatorname{In}\frac{1.25}{\delta }}\times \frac{\Delta f}{\epsilon }$ï¼Œè¡¨ç¤ºæ ‡å‡†å·®ï¼Œ$\sigma^2$è¡¨ç¤ºæ–¹å·®

$N(0,{{\sigma }^{2}})$è¡¨ç¤ºä»ä¸­å¿ƒä¸º 0 ä¸”æ–¹å·®ä¸º${\sigma }^{2}$çš„é«˜æ–¯ï¼ˆæ­£æ€ï¼‰åˆ†å¸ƒä¸­æŠ½æ ·ã€‚åœ¨å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦ç»™å‡ºæ–¹å·®çš„å€¼å³å¯ã€‚


é—®é¢˜1ï¼šå¦‚ä½•è®¾ç½®é«˜æ–¯å™ªå£°çš„æ ‡å‡†å·®ï¼Ÿå¯ä»¥å…ˆè®¾ç½®ä¸º0.01

{% endraw %}

# 1.æœ¬åœ°é˜²å¾¡

## 1.é¢‘è°±è¿‡æ»¤ï¼ˆâˆšï¼‰

### 1.è®¾ç½®å‚æ•°

1.åœ¨cifar_fed.yamlä¸­æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š

```yaml
# defence è¿™æ˜¯è‡ªå·±å†™çš„
spectre_filter: True
 # é‡‡æ ·é¢‘ç‡
f_sample: 1000
f_pass: 150
f_stop: 250
Ap: 1
As: 20
```

2.åœ¨parameter.pyä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```python
# defence
spectre_filter: bool = False
f_sample: int = None
f_pass: int = None
f_stop: int = None
Ap: int = None
As: int = None
```

### 2.è®¾è®¡ä½é€šæ»¤æ³¢å™¨

åœ¨atack.pyä¸­çš„compute_blind_lossåŠ å¦‚ä¸‹ä»£ç ï¼š

```python
# è‡ªå·±çš„å®¢æˆ·ç«¯é˜²å¾¡
if self.params.spectre_filter:
    # å¯¹æ¯ä¸ªå›¾ç‰‡è¿›è¡ŒDCTè½¬æ¢ï¼Œå¹¶è¿›è¡Œè¿‡æ»¤æ“ä½œ
    batch_back = self.local_spectre(batch_back)
```

ä¸‹é¢æ˜¯local_spectreæ–¹æ³•çš„å®ç°è¿‡ç¨‹ï¼š

```python
def local_spectre(self, batch):                                         # æœ¬åœ°é¢‘è°±è¿‡æ»¤
    # å…ˆè®¾è®¡ä½é€šæ»¤æ³¢å™¨
    b0, a0 = self.lowpassFilter()
    # è½¬æ¢å›¾åƒï¼Œbatchæœ‰batch.inputs[0]ã€batch.labels[0]
    filter_batch = batch.clone()
    # å°†å›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œå¹¶åˆ©ç”¨æ•°å­—ä½é€šæ»¤æ³¢å™¨å¯¹å›¾ç‰‡è¿›è¡Œæ»¤æ³¢
    for i in range(self.params.batch_size):
        # è½¬ä¸ºé»‘ç™½å›¾ç‰‡
        gray_image = torch.mean(batch.inputs[i], dim=0)
        # å°†NumPyæ•°ç»„å¤åˆ¶ä»¥ç¡®ä¿æ²¡æœ‰è´Ÿæ­¥å¹…
        filter_img = signal.filtfilt(b0, a0, gray_image)
        filter_batch.inputs[i] = torch.from_numpy(np.copy(filter_img))
    print("------------------------å·²å®Œæˆé¢‘è°±è¿‡æ»¤")
    sys.exit(1)
    return filter_batch
```

ä¸‹é¢æ˜¯ä½é€šæ»¤æ³¢å™¨çš„å®ç°è¿‡ç¨‹ï¼š

```python
# ä½é€šæ»¤æ³¢å™¨è®¾è®¡
def lowpassFilter(self):
    # è®¾è®¡å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨å‚æ•°ï¼šå…ˆå½’ä¸€åŒ–ï¼Œç„¶åè½¬æ¢åˆ°æ¨¡æ‹Ÿæ»¤æ³¢å™¨æŒ‡æ ‡
    wp = 2 * self.params.f_pass / self.params.f_sample
    ws = 2 * self.params.f_stop / self.params.f_sample
    Wp = 2 * self.params.f_sample * np.tan(wp / 2)
    Ws = 2 * self.params.f_sample * np.tan(ws / 2)
    # æ±‚æ»¤æ³¢å™¨çš„é˜¶æ•°å’Œ3dbç³»æ•°ï¼Œä¸ºtrueè¡¨ç¤ºæ¨¡æ‹Ÿæ»¤æ³¢å™¨
    N, Wn = signal.buttord(Wp, Ws, self.params.Ap, self.params.As, analog=True)
    # æ±‚ä½é€šæ»¤æ³¢å™¨çš„ç³»æ•°
    b, a = signal.butter(N, Wn, btype='low', analog=True)
    # åŒçº¿æ€§è½¬æ¢ä¸ºæ•°å­—æ»¤æ³¢å™¨
    b0, a0 = signal.bilinear(b, a, fs=self.params.f_sample)
    return b0, a0
```

